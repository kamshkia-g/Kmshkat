<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="موقع كمشكاة — محتوى تعليمي للشباب العربي + كوبونات كورسات يوديمي" />
  <title>موقع كمشكاة</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7DX46N0YKE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-7DX46N0YKE');
  </script>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
  <!-- Favicon / Icon placeholders -->
  <link rel="icon" type="image/png" href="images/favicon.png">
  <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
  <meta name="theme-color" content="#006d4f" />
  <style>
    :root{
      --c-white:#ffffff;
      --c-1:#52835f; /* greenish */
      --c-2:#006d4f; /* dark green */
      --c-3:#004a33; /* darker green */
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.08);
      --grad:linear-gradient(135deg,var(--c-1),var(--c-2),var(--c-3));
      --bg: #f7faf8;
      --txt:#0d1b16;
      --muted:#3c5246;
      --card:#ffffff;
      --border: #e5eee8;
      --placeholder: color-mix(in oklab, var(--txt) 55%, transparent);
    }
    /* Dark theme */
    [data-theme="dark"]{
      --bg:#0d1513;
      --txt:#f2fbf5;
      --muted:#b7d0c0;
      --card:#0f1c19;
      --border:#1f2b27;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --grad:linear-gradient(135deg,var(--c-3),var(--c-2),var(--c-1));
      --placeholder: color-mix(in oklab, var(--txt) 70%, transparent);
    }
    *{box-sizing:border-box}
    html{scroll-behavior: smooth;}
    body{
      margin:0;
      font-family:'Tajawal', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji','Segoe UI Emoji';
      background:var(--bg);
      color:var(--txt);
      line-height:1.65;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* Layout */
    .container{width:min(1100px,92vw);margin-inline:auto;padding:24px}
    header.nav{
      position:sticky;top:0;z-index:50;
      backdrop-filter:saturate(140%) blur(8px);
      background:color-mix(in oklab, var(--bg) 70%, transparent);
      border-bottom:1px solid var(--border);
    }
    .nav .row{display:flex;align-items:center;gap:14px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .brand .logo{width:36px;height:36px;border-radius:10px;background:var(--grad)}
    nav ul{display:flex;gap:6px;list-style:none;padding:0;margin:0}
    nav a{padding:10px 14px;border-radius:10px}
    nav a.active,nav a:hover{background:var(--border)}

    .actions{display:flex;align-items:center;gap:8px}
    .btn{padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:var(--card);box-shadow:var(--shadow);cursor:pointer;color:var(--txt)}
    .btn-ghost{background:transparent;border:1px solid var(--border)}
    .btn-primary{background:var(--c-2);color:white;border-color:transparent}

    /* Hero */
    .hero{
      position:relative;overflow:hidden;border-radius:28px;margin-top:18px;
      padding:clamp(28px,5vw,56px);isolation:isolate;border:1px solid var(--border);
      background:radial-gradient(1200px 600px at 70% -10%, color-mix(in oklab, var(--c-1) 20%, transparent), transparent 60%), var(--card);
    }
    .hero::before{
      content:"";position:absolute;inset:-30%;z-index:-2;filter:blur(40px) saturate(115%);
      background:conic-gradient(from 120deg at 30% 40%, var(--c-1), var(--c-2), var(--c-3), var(--c-2), var(--c-1));
      animation: spin 18s linear infinite;
      opacity:.14;
    }
    @keyframes spin{to{transform:rotate(1turn)}}
    .hero .logo-bg{position:absolute;inset:0;z-index:-1;opacity:.25;filter:blur(14px) saturate(105%);
      background-image:var(--logo-bg, url('images/background-logo.png')); background-repeat:no-repeat; background-position:center; background-size:contain;
    }
    .hero h1{margin:0 0 8px;font-size:clamp(28px,4.2vw,48px);letter-spacing:.2px}
    .hero p{margin:0 0 18px;color:var(--muted)}
    .hero .badges{display:flex;gap:10px;flex-wrap:wrap}
    .badge{padding:8px 12px;border-radius:999px;border:1px solid var(--border);background:color-mix(in oklab, var(--card) 80%, transparent)}
    
    /* Transitions & Hovers */
    .btn, .chip, .socials a {
        transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
    }
    .btn:hover, .chip:hover, .socials a:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 25px rgba(0,0,0,.12);
    }
    [data-theme="dark"] .btn:hover,
    [data-theme="dark"] .chip:hover,
    [data-theme="dark"] .socials a:hover {
        box-shadow: 0 12px 25px rgba(0,0,0,.4);
    }
    
    /* Sections */
    section{margin-top:40px}
    .section-title{display:flex;align-items:center;gap:10px;margin-bottom:14px}
    .section-title h2{font-size:24px;margin:0}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}

    .card{border:1px solid var(--border);background:var(--card);border-radius:18px;box-shadow:var(--shadow);overflow:hidden}
    .card .pad{padding:16px}
    .card .pad h3 {font-size: 1.25rem;}
    
    .stats-card h3 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 4px;
      background: var(--grad);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-align: center;
    }
    .stats-card p {
      text-align: center;
      margin: 0;
      color: var(--muted);
    }

    .course-head{height:110px;background:var(--grad);position:relative}
    .course-head::after{content:"";position:absolute;inset:0;background:radial-gradient(200px 90px at 70% 20%, rgba(255,255,255,.2), transparent 60%)}
    .course-title{font-weight:700;margin:0 0 4px}
    .course-title-ar{font-size:15px;color:var(--muted);margin:0 0 8px;font-weight:500;}
    .course-cat{font-size:12px;opacity:.8}
    .course-actions{display:flex;gap:8px;margin-top:10px; flex-wrap: wrap;}

    /* Courses filters */
    .filters{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid var(--border);cursor:pointer;background:var(--card);color:var(--txt)}
    .chip.active{background:var(--c-1);color:white;border-color:transparent}
    .search{display:flex;gap:8px}
    .search input{flex:1;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--txt)}
    .search input::placeholder{color:var(--placeholder)}
    
    .date-display {
      text-align: center;
      color: var(--muted);
      margin: -10px 0 18px;
      font-size: 15px;
    }

    /* Contact */
    .socials{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .socials a{display:flex;align-items:center;gap:10px;padding:14px;border:1px solid var(--border);border-radius:14px;background:var(--card)}
    .socials img.ico{width:20px;height:20px;object-fit:contain}

    /* Contact form */
    .contact-form{margin-top:16px;display:grid;gap:10px}
    textarea{min-height:120px;resize:vertical;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--txt)}
    textarea::placeholder{color:var(--placeholder)}

    /* Footer */
    footer{margin-top:40px;border-top:1px solid var(--border)}
    .foot{display:flex;gap:10px;justify-content:space-between;align-items:center;padding:20px 0}

    /* Tiny utilities */
    .hide{display:none}
    .mt-6{margin-top:24px}

    /* Floating Telegram Button */
    .telegram-fab {
      position: fixed;
      bottom: 25px;
      left: 25px; /* On the left for RTL layout */
      z-index: 100;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: var(--grad);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      transform: scale(0); /* Start hidden */
      animation: fab-pop-in 0.5s 1s ease-out forwards; /* Animate in after 1s delay */
    }
    .telegram-fab:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
    }
    .telegram-fab svg {
      width: 28px;
      height: 28px;
    }
    @keyframes fab-pop-in {
      to {
        transform: scale(1);
      }
    }
    
    /* Adjust for small screens */
    @media (max-width: 768px) {
      .nav .row {
        flex-wrap: wrap;
        justify-content: space-between;
      }
      nav ul {
        order: 3; /* Move nav links to a new line */
        width: 100%;
        justify-content: center;
        margin-top: 8px;
        padding-top: 8px;
        border-top: 1px solid var(--border);
      }
      .hero h1 {
        font-size: 28px;
      }
      .telegram-fab {
        bottom: 20px;
        left: 20px;
        width: 50px;
        height: 50px;
      }
    }
  </style>
</head>
<body>
<header class="nav">
  <div class="container row">
    <div class="brand"><div class="logo"></div> <span>موقع كمشكاة</span></div>
    <nav>
      <ul>
        <li><a href="#home">الرئيسية</a></li>
        <li><a href="#courses">الكورسات</a></li>
        <li><a href="#contact">تواصل معنا</a></li>
      </ul>
    </nav>
    <div class="actions">
      <button id="themeBtn" class="btn btn-ghost" title="الوضع الليلي">🌙</button>
      <a class="btn btn-primary" href="#courses">ابدأ الآن</a>
    </div>
  </div>
</header>

<main class="container">
  <!-- HOME -->
  <section id="home">
    <div class="hero">
      <div class="logo-bg" aria-hidden="true"></div>
      <h1><span style="background:var(--grad);-webkit-background-clip:text;background-clip:text;color:transparent">استعن بالله ولا تعجز</span></h1>
      <p>مِن روح الشباب ولأجلهم — منصّة عربية تُلهِمك على طريق العلم والعمل والأثر.</p>
      <div class="badges">
        <span class="badge">هِمّة</span>
        <span class="badge">روح</span>
        <span class="badge">أثر</span>
      </div>
      <div class="mt-6">
        <a class="btn btn-primary" href="#courses">تصفّح الكورسات</a>
        <a class="btn" href="#contact">راسلنا</a>
      </div>
    </div>

    <section>
      <div class="section-title"><h2>لماذا كمشكاة؟</h2></div>
      <div id="stats-grid" class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
        <article class="card stats-card"><div class="pad"><h3 id="visitors-count">0</h3><p>تفاعل على الموقع</p></div></article>
        <article class="card stats-card"><div class="pad"><h3 id="courses-count">0</h3><p>كورس مجاني تمت مشاركته</p></div></article>
        <article class="card stats-card"><div class="pad"><h3 id="countries-count">0</h3><p>زوار من دول مختلفة</p></div></article>
      </div>
    </section>
  </section>

  <!-- COURSES -->
  <section id="courses">
    <div class="section-title"><h2>الكورسات المجانية</h2></div>
    <div id="course-date" class="date-display"></div>

    <div class="filters">
      <div class="search" style="flex:1">
        <input id="q" type="search" placeholder="ابحث باسم الكورس (عربي أو إنجليزي)…" />
        <button class="btn" id="clearQ">مسح</button>
      </div>
      <div id="cats" class="filters"></div>
    </div>

    <div id="coursesGrid" class="grid"></div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <div class="section-title"><h2>تواصل معنا</h2></div>
    <div class="socials">
      <a href="https://api.whatsapp.com/send/?phone=201023443160&text&type=phone_number&app_absent=0" target="_blank" rel="noopener">
        <img class="ico" src="images/whatsapp.svg" alt="واتساب"/><span>واتساب</span>
      </a>
      <a href="https://www.facebook.com/MostafaKmshkat" target="_blank" rel="noopener">
        <img class="ico" src="images/facebook.svg" alt="فيسبوك"/><span>فيسبوك</span>
      </a>
      <a href="https://www.linkedin.com/in/mostafakamishka/" target="_blank" rel="noopener">
        <img class="ico" src="images/linkedin.svg" alt="لينكدإن"/><span>لينكدإن</span>
      </a>
      <a href="https://www.instagram.com/mostafakmshkat/" target="_blank" rel="noopener">
        <img class="ico" src="images/instagram.svg" alt="إنستجرام"/><span>إنستجرام</span>
      </a>
      <a href="https://x.com/Mostafakamishka" target="_blank" rel="noopener">
        <img class="ico" src="images/x.svg" alt="X"/><span>X (تويتر)</span>
      </a>
      <a href="https://t.me/Kmshkat" target="_blank" rel="noopener">
        <img class="ico" src="images/telegram.svg" alt="تليجرام"/><span>قناة كمشكاة</span>
      </a>
      <a href="https://t.me/Kamshka_Communtiy/831" target="_blank" rel="noopener">
        <img class="ico" src="images/telegram.svg" alt="تليجرام"/><span>جروب الكورسات</span>
      </a>
    </div>

    <div class="contact-form">
      <label for="waMsg">اكتب رسالتك:</label>
      <textarea id="waMsg" placeholder="اكتب سؤالك أو رسالتك هنا…"></textarea>
      <button class="btn btn-primary" id="waSend">إرسال على واتساب</button>
    </div>
  </section>
</main>

<!-- Floating Telegram Button -->
<a href="https://t.me/Kmshkat" target="_blank" rel="noopener" class="telegram-fab" title="تابعنا على تليجرام">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M22 2L11 13"></path>
    <path d="M22 2L15 22L11 13L2 9L22 2Z"></path>
  </svg>
</a>

<footer class="container">
  <div class="foot">
    <small>© <span id="year"></span> كمشكاة — كل الحقوق محفوظة</small>
    <small>مبني بــ HTML/CSS/JS فقط</small>
  </div>
</footer>

<script>
  // ===== Courses data =====
  // This list contains only today's courses.
  const courses = [
    {t:'YouTube Masterclass With Video Editing and Graphics Design', t_ar:'دورة يوتيوب متقدمة مع مونتاج وتصميم جرافيك', url:'https://www.udemy.com/course/youtube-masterclass-with-video-editing-and-graphics-design/?couponCode=E0F97F5F531DC90E58AA', cat:'تسويق/محتوى'},
    {t:'AI Websites Every Professional Must Know in 2025', t_ar:'مواقع ذكاء اصطناعي يجب أن يعرفها كل محترف في 2025', url:'https://www.udemy.com/course/ai-websites-every-professional-must-know-in-2025/?couponCode=AA936F99EBDB811BB0EA', cat:'برمجة/AI'},
    {t:'Professional Diploma in Copywriting and Business Writing', t_ar:'دبلوم احترافي في كتابة الإعلانات والكتابة التجارية', url:'https://www.udemy.com/course/copywriting_businesswriting/?couponCode=CC3F20AE117AC661A7EA', cat:'تسويق/كتابة'},
    {t:'UIUX with Figma and Adobe XD', t_ar:'تصميم واجهات وتجارب المستخدم باستخدام Figma و Adobe XD', url:'https://www.udemy.com/course/uiux-with-figma-and-adobe-xd/?couponCode=AAC470B34ADAEA0CCEF3', cat:'تصميم UI/UX'},
    {t:'C++ Programming Made Easy: From Basics to Advanced Concepts', t_ar:'برمجة C++ بسهولة: من الأساسيات للمفاهيم المتقدمة', url:'https://www.udemy.com/course/c-programming-made-easy-from-basics-to-advanced-concepts/?couponCode=4923C5983F7D14EAF3EB', cat:'برمجة/C'},
    {t:'React.js Complete Guide: Build Interactive Web Applications', t_ar:'دليل React.js الكامل: بناء تطبيقات ويب تفاعلية', url:'https://www.udemy.com/course/reactjs-complete-guide-build-interactive-web-applications/?couponCode=4FD5EAEFEEFBD8DEE0DF', cat:'برمجة/React'},
    {t:'Digital Marketing Professional Certification', t_ar:'شهادة محترف التسويق الرقمي', url:'https://www.udemy.com/course/digital-marketing-expert-assessment/?couponCode=C08E25C1F4BCF0764DD1', cat:'تسويق رقمي'},
    {t:'NumPy, Pandas, & Python for Data Analysis: A Complete Guide', t_ar:'دليل كامل لـ NumPy, Pandas, و Python لتحليل البيانات', url:'https://www.udemy.com/course/numpy-pandas-python-for-data-analysis-a-complete-guide/?couponCode=27B1E03642D0C8344E44', cat:'علم بيانات'},
    {t:'Mastering C++ Language - C++ Programming For Beginners', t_ar:'إتقان لغة C++ - برمجة C++ للمبتدئين', url:'https://www.udemy.com/course/mastering-c-plus-language-c-programming-for-beginners/?couponCode=9F723488610601F1EC69', cat:'برمجة/C'},
    {t:'Master Data Analysis with Python - From Beginner to Pro', t_ar:'إتقان تحليل البيانات بايثون - من المبتدئ للمحترف', url:'https://www.udemy.com/course/master-data-analysis-with-python-from-beginner-to-pro/?couponCode=049105AD4C767E4142A9', cat:'علم بيانات'},
    {t:'Mastering C# Learn Building Games, Application, Softwares', t_ar:'إتقان C# لإنشاء الألعاب والتطبيقات والبرامج', url:'https://www.udemy.com/course/mastering-c-learn-building-games-application-softwares/?couponCode=D772659D99778F610CB8', cat:'برمجة/C#'},
    {t:'HTML to React Template Convert: Full Complete Guided Project', t_ar:'مشروع كامل: تحويل قالب HTML إلى React', url:'https://www.udemy.com/course/html-to-react-template-convert-full-complete-guided-project/?couponCode=BECA7532F2DDF4949D8A', cat:'برمجة/React'},
    {t:'C# for Beginner', t_ar:'لغة C# للمبتدئين', url:'https://www.udemy.com/course/csharp-for-beginner/?couponCode=6F8E14DC416765E94333', cat:'برمجة/C#'},
    {t:'The Ultimate Python Developer Course: Learn Step by Step', t_ar:'دورة مطور بايثون النهائية: تعلم خطوة بخطوة', url:'https://www.udemy.com/course/the-ultimate-python-developer-course-learn-step-by-step/?couponCode=D83E29536C890F2A633F', cat:'برمجة/Python'},
    {t:'HTML5 Masterclass: Build Modern and Mobile Friendly Websites', t_ar:'دورة HTML5 المتقدمة: بناء مواقع عصرية ومتوافقة مع الموبايل', url:'https://www.udemy.com/course/html5-masterclass-build-modern-and-mobile-friendly-websites/?couponCode=76CF2E59A930559B1FD8', cat:'ويب/Frontend'},
    {t:'Mastering Excel Data Visualization with Design Chart & Graph', t_ar:'إتقان عرض البيانات المرئي في إكسل', url:'https://www.udemy.com/course/mastering-excel-data-visualization-with-design-chart-graph/?couponCode=BF3B72D420654C6F149F', cat:'إكسل/بيانات'},
    {t:'The Complete Microsoft Excel Course: Beginner to Advanced', t_ar:'دورة مايكروسوفت إكسل الكاملة: من المبتدئ للمتقدم', url:'https://www.udemy.com/course/the-complete-microsoft-excel-course-beginner-to-advanced/?couponCode=15B4439A0892935A35D3', cat:'إكسل/بيانات'},
    {t:'Python Complete Course For Beginners', t_ar:'دورة بايثون كاملة للمبتدئين', url:'https://www.udemy.com/course/python-complete-course-for-beginners-h/?couponCode=D9C0C74D0AF562B73079', cat:'برمجة/Python'},
    {t:'Adobe After Effect Essential: Learn Video Motion Animation', t_ar: 'أساسيات Adobe After Effect: تعلم الرسوم المتحركة بالفيديو', url:'https://www.udemy.com/course/adobe-after-effect-essential-learn-video-motion-animation/?couponCode=CDF1D78100A116277796', cat:'تصميم/Motion'},
    {t:'Formación: Contadores Gastronómicos', t_ar:'التدريب: محاسبون متخصصون في المطاعم', url:'https://www.udemy.com/course/contadoresgastronomicos/?couponCode=OCT2025', cat:'إدارة أعمال'},
    {t:'Sustainable Manufacturing: Review & Emerging Advances', t_ar:'التصنيع المستدام: مراجعة والتطورات الناشئة', url:'https://www.udemy.com/course/sustainable-manufacturing/?couponCode=6CD19DA2747C0AC27FF2', cat:'هندسة'},
    {t:'Professional Diploma of the Executive Assistant', t_ar:'دبلوم احترافي للمساعد التنفيذي', url:'https://www.udemy.com/course/professional-diploma-of-the-executive-assistant/?couponCode=25936D242CF282CEAE27', cat:'إدارة أعمال'},
    {t:'ServiceNow Security Incident Response CIS-SIR Practice Exams', t_ar:'اختبارات تدريبية ServiceNow للاستجابة للحوادث الأمنية', url:'https://www.udemy.com/course/servicenow-security-incident-response-cis-sir-practice-exams/?couponCode=OCT06FREE', cat:'أمن معلومات'},
    {t:'ServiceNow Vendor Risk Management CIS-VRM Practice Exams', t_ar:'اختبارات تدريبية ServiceNow لإدارة مخاطر الموردين', url:'https://www.udemy.com/course/servicenow-vendor-risk-management-cis-vrm-practice-exams/?couponCode=OCT06FREE', cat:'إدارة أعمال'},
    {t:'ServiceNow Human Resources CIS-HR Practice Exams', t_ar:'اختبارات تدريبية ServiceNow للموارد البشرية', url:'https://www.udemy.com/course/servicenow-human-resources-cis-hr-practice-exams/?couponCode=OCT06FREE', cat:'إدارة أعمال'},
    {t:'ServiceNow Project Portfolio Management CIS-PPM Exam Prep', t_ar:'التحضير لامتحان ServiceNow لإدارة محافظ المشاريع', url:'https://www.udemy.com/course/servicenow-project-portfolio-management-cis-ppm-exam-prep/?couponCode=OCT06FREE', cat:'إدارة مشاريع'},
    {t:'Webservices API Testing with Postman - Complete Guide', t_ar:'دليل كامل لاختبار واجهات برمجة التطبيقات (API) باستخدام Postman', url:'https://www.udemy.com/course/api-testing-with-postman-for-beginners-learnit/?couponCode=OCTOBER_FREE_2025', cat:'برمجة'},
    {t:'Java Test Automation Engineer - from Zero to Hero', t_ar:'مهندس أتمتة اختبارات جافا - من الصفر للبطل', url:'https://www.udemy.com/course/java-test-automation-engineer-from-zero-to-hero/?couponCode=OCTOBER_FREE_2025', cat:'برمجة/Java'},
    {t:'ServiceNow Risk and Compliance CIS-RC Practice Exams', t_ar:'اختبارات تدريبية ServiceNow للمخاطر والامتثال', url:'https://www.udemy.com/course/servicenow-risk-and-compliance-cis-rc-practice-exams/?couponCode=OCT06FREE', cat:'إدارة أعمال'},
    {t:'Máster en Elementor 2025, ¡Desde Cero Hasta Experto!', t_ar:'ماجستير في Elementor 2025، من الصفر للخبير!', url:'https://www.udemy.com/course/master-en-elementor-desde-cero-hasta-experto/?couponCode=MASTER-GR86', cat:'ويب/Wordpress'},
    {t:'Hacking Ético - Virus, Troyanos, Spywares, Malware', t_ar:'القرصنة الأخلاقية - فيروسات، أحصنة طروادة، برامج تجسس', url:'https://www.udemy.com/course/hacking-etico-malware/?couponCode=027B45B258E40BC183AD', cat:'أمن معلومات'},
    {t:'Hacking Ético con Kali Linux', t_ar:'القرصنة الأخلاقية باستخدام كالي لينكس', url:'https://www.udemy.com/course/hacking-etico-con-kali-linux/?couponCode=A9CF0B79EDB048F33E1E', cat:'أمن معلومات'},
    {t:'Hacking Ético - Aprende Hacking con CTFs (Capture The Flag)', t_ar:'القرصنة الأخلاقية - تعلم القرصنة مع تحديات CTF', url:'https://www.udemy.com/course/hacking-etico-aprende-hacking-con-ctfs-capture-the-flag/?couponCode=BEB5372141D4D1990DC6', cat:'أمن معلومات'},
    {t:'Hacking Etico a Redes WiFi', t_ar:'القرصنة الأخلاقية لشبكات الواي فاي', url:'https://www.udemy.com/course/hacking-a-redes-inalambricas/?couponCode=4340CDAA1079EED7E52F', cat:'أمن معلومات'},
    {t:'Codificación Segura en Java con Ejemplos de Aplicaciones Web', t_ar:'الترميز الآمن في جافا مع أمثلة تطبيقات الويب', url:'https://www.udemy.com/course/codificacion-segura-learnit/?couponCode=OCTOBER_FREE_2025', cat:'برمجة/Java'},
    {t:'Palo Alto Networks Certified Network Security Administrator', t_ar:'مسؤول أمن شبكات معتمد من Palo Alto', url:'https://www.udemy.com/course/palo-alto-networks-certified-network-security-administrator-x/?couponCode=OCT06FREE', cat:'شبكات'},
    {t:'Palo Alto Networks Certified Detection & Remediation Analyst', t_ar:'محلل كشف ومعالجة معتمد من Palo Alto', url:'https://www.udemy.com/course/palo-alto-networks-certified-detection-remediation-analyst/?couponCode=OCT06FREE', cat:'أمن معلومات'},
    {t:'OWASP Top 10 2023 de Seguridad en APIs: Guía Completa', t_ar:'أفضل 10 ثغرات أمان في واجهات برمجة التطبيقات (OWASP 2023)', url:'https://www.udemy.com/course/owasp-security-learnit-es/?couponCode=OCTOBER_FREE_2025', cat:'أمن معلومات'},
    {t:'Palo Alto Networks Prisma Certified Cloud Security Engineer', t_ar:'مهندس أمن سحابي معتمد من Palo Alto Prisma', url:'https://www.udemy.com/course/palo-alto-networks-prisma-certified-cloud-security-engineer/?couponCode=OCT06FREE', cat:'حوسبة سحابية'}
  ];


  // This number represents the total courses ever shared, not just today's.
  const totalCoursesShared = 218; 

  let coursesRendered = false;
  // ===== Rounting and App Logic =====
  document.addEventListener('DOMContentLoaded', () => {
    // Select all sections and nav links
    const sections = document.querySelectorAll('main > section');
    const navLinks = document.querySelectorAll('header nav a');

    function updateView() {
      const hash = window.location.hash || '#home';
      
      // Show/hide sections
      sections.forEach(sec => {
        sec.style.display = ('#' + sec.id === hash) ? 'block' : 'none';
      });

      // Update active nav link
      navLinks.forEach(link => {
        link.classList.toggle('active', link.getAttribute('href') === hash);
      });
      
      // Render courses if on the courses page
      if (hash === '#courses' && !coursesRendered) {
        render();
        coursesRendered = true; // Mark as rendered to avoid re-rendering filters
        setTimeout(() => document.getElementById('q')?.focus(), 50);
      }
    }

    // Handle navigation
    window.addEventListener('hashchange', updateView);
    // Initial view
    updateView();
    
    // Initial render of filters and categories
    renderFilters();
  });


  function renderFilters(){
    // Collect categories dynamically
    const categories = Array.from(new Set(courses.map(c=>c.cat))).sort();

    // Render filter chips
    const catsEl = document.getElementById('cats');
    if (!catsEl) return;
    
    catsEl.innerHTML = ''; // Clear existing filters to avoid duplication
    const chips = [{label:'الكل', value:''}, ...categories.map(c=>({label:c, value:c}))];
    let activeCat = '';
    
    chips.forEach((ch,i)=>{
      const b = document.createElement('button'); 
      b.className='chip' + (i===0 ? ' active' : ''); 
      b.textContent=ch.label; 
      b.dataset.value=ch.value;
      b.addEventListener('click',()=>{
        activeCat = ch.value; 
        document.querySelectorAll('#cats .chip').forEach(x=>x.classList.remove('active')); 
        b.classList.add('active'); 
        renderCourses(activeCat, document.getElementById('q').value);
      });
      catsEl.appendChild(b);
    });

    // Search functionality
    const q = document.getElementById('q');
    const clearQ = document.getElementById('clearQ');
    if(q) q.addEventListener('input', () => renderCourses(activeCat, q.value));
    if(clearQ) clearQ.onclick = () => { 
      if(q) q.value=''; 
      renderCourses(activeCat, ''); 
    };
  }

  function renderCourses(activeCat = '', term = '') {
      const grid = document.getElementById('coursesGrid');
      if (!grid) return;

      const s = term.trim().toLowerCase();
      const list = courses.filter(c => 
          (activeCat ? c.cat === activeCat : true) && 
          (s ? (c.t.toLowerCase().includes(s) || c.t_ar.toLowerCase().includes(s)) : true)
      );
      grid.innerHTML = list.map(cardTemplate).join('');
  }


  // This function is now the main entry point for rendering content on the courses page
  function render() {
    renderCourses(); // Initially render all courses
  }


  function cardTemplate(c){
    return `<article class="card">
      <div class="course-head"></div>
      <div class="pad">
        <h3 class="course-title">${c.t}</h3>
        <p class="course-title-ar">${c.t_ar}</p>
        <div class="course-cat">${c.cat}</div>
        <div class="course-actions">
          <a class="btn btn-primary" href="${c.url}" target="_blank" rel="noopener">ادخل الكورس</a>
          <button class="btn btn-ghost" onclick="copyLink('${c.url.replace(/'/g,"%27")}', this)">نسخ الرابط</button>
          <button class="btn btn-ghost" onclick="shareCourse(this)">مشاركة 🔗</button>
        </div>
      </div>
    </article>`
  }

  // Share Course
  async function shareCourse(btn) {
    const siteUrl = window.location.origin + window.location.pathname;
    const shareData = {
      title: 'موقع كمشكاة | كورسات مجانية يوميًا',
      text: 'اكتشف عشرات الكورسات المجانية المتجددة يوميًا في مختلف المجالات على موقع كمشكاة.',
      url: siteUrl,
    };
    if (navigator.share) {
      try {
        await navigator.share(shareData);
      } catch (err) {
        // User probably cancelled the share, do nothing.
      }
    } else {
      // Fallback for browsers that don't support the Share API
      copyLink(siteUrl, btn);
    }
  }

  // Copy util
  function copyLink(text, btn){
    navigator.clipboard.writeText(text).then(()=>{
      const originalText = btn.textContent;
      btn.textContent='تم النسخ ✅'; 
      setTimeout(()=> { btn.textContent = originalText }, 1400)
    })
  }
  
  // ===== Animated Counters =====
  function animateValue(obj, start, end, duration) {
    let startTimestamp = null;
    const step = (timestamp) => {
      if (!startTimestamp) startTimestamp = timestamp;
      const progress = Math.min((timestamp - startTimestamp) / duration, 1);
      obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString('ar-EG');
      if (progress < 1) {
        window.requestAnimationFrame(step);
      }
    };
    window.requestAnimationFrame(step);
  }

  const statsObserver = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const coursesCountEl = document.getElementById('courses-count');
        const visitorsCountEl = document.getElementById('visitors-count');
        const countriesCountEl = document.getElementById('countries-count');
        
        if (coursesCountEl && !coursesCountEl.classList.contains('animated')) {
          animateValue(coursesCountEl, 0, totalCoursesShared, 2000);
          coursesCountEl.classList.add('animated');
        }
        
        if (visitorsCountEl && !visitorsCountEl.classList.contains('animated')) {
          animateValue(visitorsCountEl, 0, 542, 2000); 
          visitorsCountEl.classList.add('animated');
        }

        if (countriesCountEl && !countriesCountEl.classList.contains('animated')) {
          animateValue(countriesCountEl, 0, 9, 2000); 
          countriesCountEl.classList.add('animated');
        }
        statsObserver.unobserve(entry.target); // Animate only once
      }
    });
  }, { threshold: 0.1 }); // Changed threshold to 0.1 for better mobile triggering

  const statsGrid = document.getElementById('stats-grid');
  if (statsGrid) {
    statsObserver.observe(statsGrid);
  }


  // Year
  document.getElementById('year').textContent = new Date().getFullYear();

  // WhatsApp send with latest typed message
  const waSendBtn = document.getElementById('waSend');
  if(waSendBtn){
    waSendBtn.addEventListener('click', ()=>{
      const msg = (document.getElementById('waMsg').value || '').trim();
      const text = msg || 'السلام عليكم، لدي استفسار.';
      const url = 'https://api.whatsapp.com/send?phone=201023443160&text=' + encodeURIComponent(text);
      window.open(url, '_blank');
    });
  }

  // Expose helper to set hero bg logo
  window.mishkat = { setLogoBg:(url)=>{ document.querySelector('.hero').style.setProperty('--logo-bg', `url(${url})`) } };

  // ===== Theme (Dark/Light) =====
  const themeBtn_el = document.getElementById('themeBtn');
  const setTheme_fn = (t)=>{
    if(t==='dark'){document.documentElement.setAttribute('data-theme','dark')}
    else {document.documentElement.removeAttribute('data-theme')}
    localStorage.setItem('theme', t);
    if(themeBtn_el) themeBtn_el.textContent = t==='dark' ? '☀️' : '🌙';
  }
  setTheme_fn(localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light'));
  if(themeBtn_el) themeBtn_el.addEventListener('click',()=> setTheme_fn(document.documentElement.hasAttribute('data-theme')?'light':'dark'));

  // ===== Date Display =====
  function displayDate_fn() {
    const today = new Date();
    const gregorianDate = new Intl.DateTimeFormat('ar-EG', { dateStyle: 'full' }).format(today);
    const hijriDate = new Intl.DateTimeFormat('ar-SA-u-ca-islamic-umalqura', { dateStyle: 'full' }).format(today);
    const dateEl = document.getElementById('course-date');
    if(dateEl) {
      dateEl.innerHTML = `كورسات اليوم: ${gregorianDate}  - ${hijriDate}`;
    }
  }
  displayDate_fn();

</script>
</body>
</html>

